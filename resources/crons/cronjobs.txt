# Cron jobs for biospex production

# Cleans download directory removing files older than
00 00 * * * /usr/bin/php /data/web/biospex/production/artisan download:clean >> /var/log/biospex/download.clean.log 2>&1

# Check ocr queue table for invalid records
00 00 * * * /usr/bin/php /data/web/biospex/production/artisan ocrqueue:check >> /var/log/biospex/ocrqueue.check.log 2>&1

# Send create csv requests to notes from nature
0 0 * * * /usr/bin/php /data/web/biospex/production/artisan nfn:csvcreate >> /var/log/biospex/nfncsv.create.log 2>&1

# Process the workflow manager each morning
0 6 * * * /usr/bin/php /data/web/biospex/production/artisan workflow:manage >> /var/log/biospex/workflow.manage.log 2>&1

# Trigger polling for export
*/5 * * * * /usr/bin/php /data/web/biospex/production/artisan export:poll >> /var/log/biospex/export.poll.log 2>&1

#
*/5 * * * * /usr/bin/php /data/web/biospex/production/artisan ocrprocess:records >> /var/log/biospex/ocrprocess.poll.log 2>&1

# Clean reports directory
0 23 * * * /usr/bin/php /data/web/biospex/production/artisan report:clean >> /var/log/biospex/report-clean.log 2>&1

# Cron for auto-renew letsencrypt certs run twice a day (recommended)
0 11,23 * * * ./opt/certbot-auto renew --quiet --no-self-upgrade >> /var/log/cert-bot.renew.log 2>&1
