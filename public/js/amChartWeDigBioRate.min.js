let weDigBioRateChart;function getProjects(){return $.get("ajax/wedigbio-projects")}function initialRefresh(){let e=3e5,t=new Date;return new Date(Math.ceil(t.getTime()/e)*e).getTime()-t.getTime()}am4core.ready((function(){$("#wedigbio-rate-modal").on("show.bs.modal",(function(e){getProjects().fail((function(e){console.log(e)})).done((function(t){console.log(t);let a=$(e.relatedTarget).data("href");console.log(a);let i=initialRefresh();am4core.useTheme(am4themes_animated),weDigBioRateChart=am4core.create("weDigBioRateChartDiv",am4charts.XYChart),weDigBioRateChart.dataSource.url=a,weDigBioRateChart.dataSource.reloadFrequency=i,weDigBioRateChart.dataSource.incremental=!0,weDigBioRateChart.dataSource.adapter.add("url",(function(e,t){return t.lastLoad&&(weDigBioRateChart.dataSource.reloadFrequency=3e5,e+="/"+t.lastLoad.getTime()),e})),weDigBioRateChart.dateFormatter.inputDateFormat="yyyy-MM-dd HH:mm:ss",weDigBioRateChart.hiddenState.properties.opacity=0,weDigBioRateChart.padding(0,0,0,0),weDigBioRateChart.zoomOutButton.disabled=!0,weDigBioRateChart.events.on("datavalidated",(function(){r.zoom({start:1/15,end:1.2},!1,!0)})),weDigBioRateChart.scrollbarX=new am4core.Scrollbar;let r=weDigBioRateChart.xAxes.push(new am4charts.DateAxis);r.baseInterval={timeUnit:"minute",count:5},r.renderer.minGridDistance=20,r.title.text="UTC",r.title.fontSize=20,r.dateFormats.setKey("minute","hh:mm"),r.periodChangeDateFormats.setKey("minute","[bold]h:mm a"),r.periodChangeDateFormats.setKey("hour","[bold]h:mm a"),r.renderer.axisFills.template.disabled=!0,r.renderer.ticks.template.disabled=!0,r.interpolationDuration=500,r.rangeChangeDuration=500,r.renderer.labels.template.adapter.add("rotation",(function(e,t){return t.verticalCenter="middle",t.horizontalCenter="left",-90}));let o=weDigBioRateChart.yAxes.push(new am4charts.ValueAxis);o.title.text="Estimated Records Per Hour",o.title.fontSize=20,o.tooltip.disabled=!0,o.interpolationDuration=500,o.rangeChangeDuration=500,o.renderer.minLabelPosition=.05,o.renderer.maxLabelPosition=.95,o.renderer.axisFills.template.disabled=!0,o.renderer.ticks.template.disabled=!0,$.each(t,(function(e,t){console.log(t);let a=weDigBioRateChart.series.push(new am4charts.LineSeries);a.dataFields.dateX="date",a.dataFields.valueY=t,a.name=t,a.strokeWidth=2,a.dataItems.template.locations.dateX=0,a.interpolationDuration=500,a.defaultState.transitionDuration=0,a.tensionX=.8;let i=a.createChild(am4charts.CircleBullet);i.circle.radius=5,i.fillOpacity=1,i.fill=weDigBioRateChart.colors.getIndex(1),i.isMeasured=!1,a.events.on("validated",(function(){null!=a.dataItems.last&&(i.moveTo(a.dataItems.last.point),i.validatePosition())}))})),weDigBioRateChart.legend=new am4charts.Legend,weDigBioRateChart.legend.labels.template.text="[bold]{name}",weDigBioRateChart.legend.useDefaultMarker=!0;let n=weDigBioRateChart.legend.markers.template.children.getIndex(0);n.cornerRadius(12,12,12,12),n.strokeWidth=2,n.strokeOpacity=1,n.stroke=am4core.color("#ccc")}))})).on("hidden.bs.modal",(function(){weDigBioRateChart.dispose()}))}));
