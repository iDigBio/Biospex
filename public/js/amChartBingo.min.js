function showWinnerModal(e,o,a=!1){$("#bingo-modal").modal("show").on("shown.bs.modal",(function(){$("#bingo-conffeti").collapse("show"),$body=$(this).find(".modal-body"),$body.html(o),timeout=setTimeout((function(){$("#bingo-modal").modal("hide"),$("#bingo-conffeti").collapse("hide"),$body.html("")}),1e4)})).on("hidden.bs.modal",(function(){createRows(e),$("#bingo-conffeti").collapse("hide")}))}function createRows(e){e.html(""),$.post(Laravel.rowsUrl).done((function(o){e.html(o)})).fail((function(){e.html("<p>Failed to load bingo rows.</p>")}))}$((function(){let e=am4core.create("bingodiv",am4maps.MapChart);e.geodata=am4geodata_worldLow,e.projection=new am4maps.projections.Miller;let o=e.series.push(new am4maps.MapPolygonSeries);o.useGeodata=!0;let a=o.mapPolygons.template;a.tooltipText="{name}",a.fill=am4core.color("#74B266"),a.states.create("hover").properties.fill=am4core.color("#367B25"),o.exclude=["AQ"];let t=e.series.push(new am4maps.MapImageSeries),n=t.mapImages.template,l=n.createChild(am4core.Image);l.href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-160/marker.svg",l.width=20,l.height=20,l.nonScaling=!0,l.tooltipText="{city}",l.horizontalCenter="middle",l.verticalCenter="bottom",n.propertyFields.latitude="latitude",n.propertyFields.longitude="longitude",t.data=JSON.parse(Laravel.bingoUserData),Echo.channel(Laravel.channel).listen("BingoEvent",(e=>{let o=JSON.parse(e.data),a=o.winner,n=o.marker;console.log("Marker: "+n.uuid),n.uuid!==Laravel.bingoUserUuid?(t.addData(o.marker),console.log("Winner: "+a),null!==a?showWinnerModal(i,"<h3>We Have A Winner In "+a.city+"!!</h3>"):console.log("No winner")):console.log("Marker is already on the map")}));let i=$("#bingo-rows");createRows(i);let r=[["a1","a2","a3","a4","a5"],["b1","b2","b3","b4","b5"],["c1","c2","c3","c4","c5"],["d1","d2","d3","d4","d5"],["e1","e2","e3","e4","e5"],["a1","b1","c1","d1","e1"],["a2","b2","c2","d2","e2"],["a3","b3","c3","d3","e3"],["a4","b4","c4","d4","e4"],["a5","b5","c5","d5","e5"],["a1","b2","c3","d4","e5"],["a5","b4","c3","d2","e1"]],c=r.length,d=["c3"];i.on("click",".square",(function(){$(this).toggleClass("clicked"),d.push($(this).attr("id"));for(let e=0;e<c;e++){let o=0;for(let a=0;a<5;a++)$.inArray(r[e][a],d)>-1&&o++;5===o&&($.get(Laravel.winnerUrl),showWinnerModal(i,"<h3>You are a winner!! Congratulations!!</h3>",!0),d=["c3"])}})).data("clicked",0).click((function(){let e=$(this).data("clicked");$(this).data("clicked",e++)}))}));
