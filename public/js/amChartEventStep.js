var chart;am4core.ready(function(){$("#step-chart-modal").on("show.bs.modal",function(e){var t,a=Laravel.teams,r=Laravel.timezone,n=$(e.relatedTarget).data("href"),i=(t=new Date,new Date(3e5*Math.ceil(t.getTime()/3e5)).getTime()-t.getTime());am4core.useTheme(am4themes_animated),(chart=am4core.create("chartdiv",am4charts.XYChart)).dataSource.url=n,chart.dataSource.reloadFrequency=i,chart.dataSource.incremental=!0,chart.dataSource.adapter.add("url",function(e,t){return t.lastLoad&&(chart.dataSource.reloadFrequency=3e5,e+="/"+t.lastLoad.getTime()),e}),chart.dateFormatter.inputDateFormat="yyyy-MM-dd HH:mm:ss",chart.hiddenState.properties.opacity=0,chart.padding(0,0,0,0),chart.zoomOutButton.disabled=!0,chart.events.on("datavalidated",function(){o.zoom({start:1/15,end:1.2},!1,!0)}),chart.scrollbarX=new am4core.Scrollbar;var o=chart.xAxes.push(new am4charts.DateAxis);o.baseInterval={timeUnit:"minute",count:5},o.renderer.minGridDistance=20,o.title.text=r,o.title.fontSize=20,o.dateFormats.setKey("minute","hh:mm"),o.periodChangeDateFormats.setKey("minute","[bold]h:mm a"),o.periodChangeDateFormats.setKey("hour","[bold]h:mm a"),o.renderer.axisFills.template.disabled=!0,o.renderer.ticks.template.disabled=!0,o.interpolationDuration=500,o.rangeChangeDuration=500,o.renderer.labels.template.adapter.add("rotation",function(e,t){return t.verticalCenter="middle",t.horizontalCenter="left",-90});var d=chart.yAxes.push(new am4charts.ValueAxis);d.title.text="Estimated Records Per Hour",d.title.fontSize=20,d.tooltip.disabled=!0,d.interpolationDuration=500,d.rangeChangeDuration=500,d.renderer.minLabelPosition=.05,d.renderer.maxLabelPosition=.95,d.renderer.axisFills.template.disabled=!0,d.renderer.ticks.template.disabled=!0,$.each(a,function(e,t){var a=chart.series.push(new am4charts.LineSeries);a.dataFields.dateX="date",a.dataFields.valueY=t,a.name=t,a.strokeWidth=2,a.dataItems.template.locations.dateX=0,a.interpolationDuration=500,a.defaultState.transitionDuration=0,a.tensionX=.8;var r=a.createChild(am4charts.CircleBullet);r.circle.radius=5,r.fillOpacity=1,r.fill=chart.colors.getIndex(1),r.isMeasured=!1,a.events.on("validated",function(){null!==a.dataItems.last&&(r.moveTo(a.dataItems.last.point),r.validatePosition())})}),chart.legend=new am4charts.Legend,chart.legend.labels.template.text="[bold]{name}:[/] {valueY.close}",chart.legend.useDefaultMarker=!0;var l=chart.legend.markers.template.children.getIndex(0);l.cornerRadius(12,12,12,12),l.strokeWidth=2,l.strokeOpacity=1,l.stroke=am4core.color("#ccc")}).on("hidden.bs.modal",function(){chart.dispose()})});
